<!DOCTYPE html>
<html lang="en">
<head>
    <!-- <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Item to Supply</title> -->
    <link rel="stylesheet" media="all" type="text/css" href="{{ url_for('static',filename='css/styles.css') }}">
</head>
<body>
    <div id="container">
        <nav>
            <div class="navbar-title">
                <p>P I N E C O N E</p>
            </div>
            <ul>
                <li><a href="{{ url_for('index') }}">Loaned Items</a></li>
                <li><a href="{{ url_for('borrowedItems') }}">Borrowed Items</a></li>
            </ul>
            <div class="profile-section">
                <!-- Name to the left of the profile picture -->
                <span class="profile-name">S. Clancy</span>
                
                <!-- Profile picture -->
                <div class="profile-picture">
                    <img src="{{ url_for('static', filename='images/profile.png') }}" alt="Profile Picture">
                </div>
            </div>
        </nav>
    
        <h1>Borrowed Items</h1>
        <div class="supply-table-container">
            <table id="supplyTable">
                <thead>
                    <tr>
                        <th>Loaner Last Name</th>
                        <th>Loaner First Name</th>
                        <th>Loaner DODID</th>
                        <th>Item NSN</th>
                        <th>Item Name</th>
                        <th>Item Serial Number</th>
                        <th>Count</th>
                        <th>Checkout Date</th>
                        <th>Last Renewed Date</th>
                        <th>Return Date</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Data will be inserted here by JavaScript -->
                </tbody>
            </table>
        </div>
    
        <script>
            function fetchAllLoaned() {
                fetch("/api/supply/borrowing?userid=6028029736")
                    .then(response => response.json())
                    .then(data => {
                        const supplyTableBody = document.getElementById("supplyTable").querySelector("tbody");
                        supplyTableBody.innerHTML = ""; // Clear the table before adding new data
    
                        data.forEach(item => {
                            const row = document.createElement("tr");
                            row.innerHTML = `
                                <td>${item.LastName || ""}</td>
                                <td>${item.FirstName || ""}</td>
                                <td>${item.DODID || ""}</td>
                                <td>${item.NSN || ""}</td>
                                <td>${item.Name || ""}</td>
                                <td>${item.Serial_Num || ""}</td>
                                <td>${item.Count || ""}</td>
                                <td>${item.Checkout_Date || ""}</td>
                                <td>${item.Last_Renewed_Date || ""} </td>
                                <td></td>
                            `;
                            supplyTableBody.appendChild(row);
                        });
                    })
                    .catch(error => {
                        console.error("Error fetching supplies:", error);
                    });
            }
    
            // Fetch all supplies on page load
            fetchAllLoaned();
        </script>
    </div>
</body>
</html>
